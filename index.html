<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <title>Signed uploading</title>
  </head>

  <body>

    <form>
      <input type="text" name="file-name" id="name" placeholder="s" />
      <input type="file" name="file" id="files" multiple placeholder="s" />
      <button type="submit">Submit</button>
    </form>

    <div>
      <a
        href="http://localhost:3000/api/google"
        type="button"
        class="login-with-google-btn"
      >
        Sign in with Google
      </a>
    </div>

    <div>
      <a
        href="http://localhost:3000/api/facebook"
        type="button"
        class="login-with-google-btn"
      >
        Sign in with facebook
      </a>
    </div>

    <!-- <h2>Upload Files Using the Upload Widget</h2>
  <p>Perform a signed upload using the upload widget.</p>
  <p>Click "Upload Files" to open the upload widget.</p>
  <div><button id="upload_widget" class="submit">Upload Files</button></div>
  <div><img id="uploaded" /></div>
  <h3>Upload response:</h3>
  <pre class="data" id="uwdata">
  
  </pre>

  

  cloudinary upload widget -->
    <!-- <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script> -->

  <!-- local upload instantiation -->


  
</body>
<script>
 

const form = document.querySelector('form');
form.addEventListener('submit', (e) => {
    
    e.preventDefault();
    // Prevents HTML handling submission
    const name = document.getElementById("name");
    const files = document.getElementById("files");
    const formData = new FormData();
    // Creates empty formData object
    formData.append("idea", "amr");
    formData.append("description", "here is me ");
    formData.append("team", "465634864");

    // Appends value of text input
    for(let i =0; i < files.files.length; i++) {
        formData.append("files", files.files[i]);
    }
    // Appends value(s) of file input
    // Post data to Node and Express server:
    fetch('http://localhost:3000/uploadMultipleImages', {
        method: 'POST',
        body: formData, // Payload is formData object
    })
    .then(res => res.json())
    .then(data => console.log(data));
})
//   document.addEventListener('DOMContentLoaded', async () => {
//   const response = await fetch('http://localhost:3000/api/signuploadwidget');
//   const data = await response.json();

    //       var str = JSON.stringify(result, null, 4);
    //       document.getElementById("uwdata").innerHTML += str;
    //     }
    //   }

    //   const myWidget = window.cloudinary.createUploadWidget(
    //     options,
    //     processResults
    //   )
    //   document
    //     .getElementById('upload_widget')
    //     .addEventListener('click', () => myWidget.open(), false)
    // })
  </script>
</html>
